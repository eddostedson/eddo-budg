<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test CRUD Recettes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-title {
            color: #2563eb;
            border-bottom: 2px solid #2563eb;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .test-step {
            background: #f8fafc;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #10b981;
            border-radius: 4px;
        }
        .test-step.error {
            border-left-color: #ef4444;
            background: #fef2f2;
        }
        .test-step.warning {
            border-left-color: #f59e0b;
            background: #fffbeb;
        }
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
        .success { color: #10b981; font-weight: bold; }
        .error { color: #ef4444; font-weight: bold; }
        .warning { color: #f59e0b; font-weight: bold; }
        .info { color: #3b82f6; font-weight: bold; }
        .checklist {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 8px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        .checklist li:before {
            content: "‚òê ";
            color: #6b7280;
            font-weight: bold;
        }
        .checklist li.checked:before {
            content: "‚úÖ ";
            color: #10b981;
        }
        .checklist li.error:before {
            content: "‚ùå ";
            color: #ef4444;
        }
    </style>
</head>
<body>
    <h1>üß™ Test CRUD Recettes - Guide Complet</h1>
    
    <div class="test-section">
        <h2 class="test-title">üìã Pr√©requis</h2>
        <ul class="checklist">
            <li>Application lanc√©e sur localhost:3000</li>
            <li>Utilisateur connect√©</li>
            <li>Base de donn√©es Supabase configur√©e</li>
            <li>Tables recettes cr√©√©es (migration 005)</li>
        </ul>
    </div>

    <div class="test-section">
        <h2 class="test-title">üîß Test 1: Cr√©ation de Recettes</h2>
        <div class="test-step">
            <strong>√âtape 1.1:</strong> Aller sur la page Recettes (/recettes)
            <div class="code-block">http://localhost:3000/recettes</div>
        </div>
        <div class="test-step">
            <strong>√âtape 1.2:</strong> Cliquer sur "Cr√©er une recette"
            <div class="code-block">Bouton: "+ Cr√©er une recette"</div>
        </div>
        <div class="test-step">
            <strong>√âtape 1.3:</strong> Remplir le formulaire avec des donn√©es de test
            <div class="code-block">
Libell√©: "Salaire Mensuel"
Description: "Salaire de base"
Montant: 500000
Source: "Entreprise ABC"
Date: [Date actuelle]
Statut: "Re√ßue"
            </div>
        </div>
        <div class="test-step">
            <strong>√âtape 1.4:</strong> Cliquer sur "Cr√©er"
            <div class="code-block">V√©rifier que la recette appara√Æt dans la liste</div>
        </div>
        <div class="test-step">
            <strong>R√©sultat attendu:</strong> <span class="success">‚úÖ Recette cr√©√©e et visible dans la liste</span>
        </div>
    </div>

    <div class="test-section">
        <h2 class="test-title">‚úèÔ∏è Test 2: Modification de Recettes</h2>
        <div class="test-step">
            <strong>√âtape 2.1:</strong> Survoler une carte de recette existante
            <div class="code-block">Les boutons d'action doivent appara√Ætre</div>
        </div>
        <div class="test-step">
            <strong>√âtape 2.2:</strong> Cliquer sur le bouton ‚úèÔ∏è (Modifier)
            <div class="code-block">Le modal doit s'ouvrir avec les donn√©es pr√©-remplies</div>
        </div>
        <div class="test-step">
            <strong>√âtape 2.3:</strong> Modifier le libell√© et le montant
            <div class="code-block">
Libell√©: "Salaire Mensuel - Modifi√©"
Montant: 600000
            </div>
        </div>
        <div class="test-step">
            <strong>√âtape 2.4:</strong> Cliquer sur "Enregistrer"
            <div class="code-block">V√©rifier que les modifications sont sauvegard√©es</div>
        </div>
        <div class="test-step">
            <strong>R√©sultat attendu:</strong> <span class="success">‚úÖ Recette modifi√©e avec les nouvelles valeurs</span>
        </div>
    </div>

    <div class="test-section">
        <h2 class="test-title">üóëÔ∏è Test 3: Suppression de Recettes</h2>
        <div class="test-step">
            <strong>√âtape 3.1:</strong> Survoler une carte de recette
            <div class="code-block">Les boutons d'action doivent √™tre visibles</div>
        </div>
        <div class="test-step">
            <strong>√âtape 3.2:</strong> Cliquer sur le bouton üóëÔ∏è (Supprimer)
            <div class="code-block">La recette doit √™tre supprim√©e imm√©diatement</div>
        </div>
        <div class="test-step">
            <strong>√âtape 3.3:</strong> V√©rifier que la recette a disparu de la liste
            <div class="code-block">La carte ne doit plus √™tre visible</div>
        </div>
        <div class="test-step">
            <strong>R√©sultat attendu:</strong> <span class="success">‚úÖ Recette supprim√©e de la liste</span>
        </div>
    </div>

    <div class="test-section">
        <h2 class="test-title">üîç Test 4: V√©rifications Backend</h2>
        <div class="test-step">
            <strong>√âtape 4.1:</strong> Ouvrir la console du navigateur (F12)
            <div class="code-block">V√©rifier les logs de cr√©ation/modification/suppression</div>
        </div>
        <div class="test-step">
            <strong>√âtape 4.2:</strong> V√©rifier dans Supabase Dashboard
            <div class="code-block">
1. Aller sur Supabase Dashboard
2. Table Editor > recettes
3. V√©rifier que les donn√©es sont bien sauvegard√©es
            </div>
        </div>
        <div class="test-step">
            <strong>R√©sultat attendu:</strong> <span class="success">‚úÖ Donn√©es coh√©rentes entre l'interface et la base</span>
        </div>
    </div>

    <div class="test-section">
        <h2 class="test-title">üö® D√©pannage</h2>
        <div class="test-step error">
            <strong>Probl√®me:</strong> Boutons d'action non visibles
            <div class="code-block">
Solution: 
1. V√©rifier que vous √™tes bien connect√©
2. Survoler compl√®tement la carte (pas seulement le texte)
3. Attendre l'animation d'apparition
            </div>
        </div>
        <div class="test-step error">
            <strong>Probl√®me:</strong> Erreur lors de la modification
            <div class="code-block">
Solution:
1. V√©rifier la console pour les erreurs
2. S'assurer que tous les champs requis sont remplis
3. V√©rifier la connexion √† Supabase
            </div>
        </div>
        <div class="test-step error">
            <strong>Probl√®me:</strong> Suppression ne fonctionne pas
            <div class="code-block">
Solution:
1. V√©rifier les permissions RLS dans Supabase
2. S'assurer que l'utilisateur est bien authentifi√©
3. V√©rifier les logs dans la console
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2 class="test-title">‚úÖ Checklist de Validation</h2>
        <ul class="checklist">
            <li>Cr√©ation de recette fonctionne</li>
            <li>Boutons d'√©dition et suppression visibles au survol</li>
            <li>Modification sauvegarde les changements</li>
            <li>Suppression retire la recette de la liste</li>
            <li>Interface se met √† jour en temps r√©el</li>
            <li>Donn√©es coh√©rentes avec la base de donn√©es</li>
            <li>Aucune erreur dans la console</li>
            <li>Authentification fonctionne correctement</li>
        </ul>
    </div>

    <div class="test-section">
        <h2 class="test-title">üìä Tests de Performance</h2>
        <div class="test-step">
            <strong>Test de charge:</strong> Cr√©er 10 recettes rapidement
            <div class="code-block">V√©rifier que l'interface reste r√©active</div>
        </div>
        <div class="test-step">
            <strong>Test de modification en masse:</strong> Modifier plusieurs recettes
            <div class="code-block">V√©rifier que les changements sont persistants</div>
        </div>
        <div class="test-step">
            <strong>Test de suppression en masse:</strong> Supprimer plusieurs recettes
            <div class="code-block">V√©rifier que l'interface se met √† jour correctement</div>
        </div>
    </div>

    <script>
        // Script de test automatique (optionnel)
        console.log('üß™ Tests CRUD Recettes - Guide de test charg√©');
        console.log('üìã Suivez les √©tapes ci-dessus pour tester toutes les fonctionnalit√©s');
        
        // Fonction pour v√©rifier si l'utilisateur est connect√©
        function checkAuth() {
            const token = localStorage.getItem('sb-localhost-auth-token');
            if (token) {
                console.log('‚úÖ Utilisateur authentifi√©');
                return true;
            } else {
                console.log('‚ùå Utilisateur non authentifi√© - Connectez-vous d\'abord');
                return false;
            }
        }
        
        // V√©rification automatique au chargement
        if (checkAuth()) {
            console.log('üöÄ Pr√™t pour les tests CRUD');
        } else {
            console.log('üîê Veuillez vous connecter avant de commencer les tests');
        }
    </script>
</body>
</html>

